{"openapi":"3.1.0","info":{"title":"Track Leader API","description":"API for Track Leader - Activity tracking and segment leaderboards","license":{"name":"MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8000","description":"Local development server"}],"paths":{"/activities/new":{"post":{"tags":["activities"],"summary":"Create a new activity by uploading a GPX file.","operationId":"new_activity","parameters":[{"name":"activity_type_id","in":"query","description":"Activity type ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"name","in":"query","description":"Activity name","required":true,"schema":{"type":"string"}},{"name":"visibility","in":"query","description":"Visibility: public, private, or teams_only","required":false,"schema":{"type":"string"}},{"name":"team_ids","in":"query","description":"Comma-separated team IDs for teams_only visibility","required":false,"schema":{"type":"string"}},{"name":"type_boundaries","in":"query","description":"Comma-separated ISO-8601 timestamps for multi-sport segment boundaries","required":false,"schema":{"type":"string"}},{"name":"segment_types","in":"query","description":"Comma-separated activity type UUIDs for multi-sport segments","required":false,"schema":{"type":"string"}}],"requestBody":{"description":"GPX file upload","content":{"multipart/form-data":{}}},"responses":{"200":{"description":"Activity created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Activity"}}}},"400":{"description":"Invalid input"},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/activities/{activity_id}/teams/{team_id}":{"delete":{"tags":["teams"],"summary":"Unshare an activity from a team.","operationId":"unshare_activity_from_team","parameters":[{"name":"activity_id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"team_id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Activity unshared from team"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - not the owner"},"404":{"description":"Activity or sharing not found"}}}},"/activities/{id}":{"get":{"tags":["activities"],"summary":"Get an activity by ID.","operationId":"get_activity","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Activity details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Activity"}}}},"404":{"description":"Activity not found"}}},"delete":{"tags":["activities"],"summary":"Delete an activity.","operationId":"delete_activity","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Activity deleted successfully"},"404":{"description":"Activity not found"}}},"patch":{"tags":["activities"],"summary":"Update an activity.","operationId":"update_activity","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateActivityRequest"}}},"required":true},"responses":{"200":{"description":"Activity updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Activity"}}}},"404":{"description":"Activity not found"}}}},"/activities/{id}/comments":{"get":{"tags":["comments"],"summary":"Get comments for an activity.","operationId":"get_comments","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"List of comments for the activity","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentWithUser"}}}}}}},"post":{"tags":["comments"],"summary":"Add a comment to an activity.","operationId":"add_comment","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddCommentRequest"}}},"required":true},"responses":{"200":{"description":"Comment added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentWithUser"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Activity not found"}}}},"/activities/{id}/download":{"get":{"tags":["activities"],"summary":"Download an activity's GPX file.","operationId":"download_gpx_file","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"GPX file download","content":{"application/gpx+xml":{}}},"404":{"description":"Activity not found"}}}},"/activities/{id}/kudos":{"get":{"tags":["kudos"],"summary":"Get users who gave kudos to an activity.","operationId":"get_kudos_givers","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"List of users who gave kudos","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/KudosGiver"}}}}}}},"post":{"tags":["kudos"],"summary":"Give kudos to an activity.","operationId":"give_kudos","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Kudos given successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KudosResponse"}}}},"400":{"description":"Cannot give kudos to own activity"},"401":{"description":"Unauthorized"},"404":{"description":"Activity not found"}}},"delete":{"tags":["kudos"],"summary":"Remove kudos from an activity.","operationId":"remove_kudos","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Kudos removed successfully"},"401":{"description":"Unauthorized"}}}},"/activities/{id}/kudos/status":{"get":{"tags":["kudos"],"summary":"Check if user has given kudos to an activity.","operationId":"get_kudos_status","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Kudos status retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KudosStatusResponse"}}}},"401":{"description":"Unauthorized"}}}},"/activities/{id}/segments":{"get":{"tags":["activities"],"summary":"Get segment efforts matched in an activity.","operationId":"get_activity_segments","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment efforts matched in this activity","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ActivitySegmentEffort"}}}}},"404":{"description":"Activity not found"}}}},"/activities/{id}/teams":{"get":{"tags":["teams"],"summary":"Get teams an activity is shared with.","operationId":"get_activity_teams","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Teams the activity is shared with","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamSummary"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Activity not found"}}},"post":{"tags":["teams"],"summary":"Share an activity with teams.","operationId":"share_activity_with_teams","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareWithTeamsRequest"}}},"required":true},"responses":{"200":{"description":"Activity shared with teams"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - not the owner"},"404":{"description":"Activity not found"}}}},"/activities/{id}/track":{"get":{"tags":["activities"],"summary":"Get track data for an activity.","operationId":"get_activity_track","parameters":[{"name":"id","in":"path","description":"Activity ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Track data with GPS points and bounds","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackData"}}}},"404":{"description":"Activity not found"}}}},"/activity-types":{"get":{"tags":["activity-types"],"summary":"List all activity types (built-in and custom).","operationId":"list_activity_types","responses":{"200":{"description":"List of all activity types","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ActivityTypeRow"}}}}}}},"post":{"tags":["activity-types"],"summary":"Create a custom activity type.","operationId":"create_activity_type","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateActivityTypeRequest"}}},"required":true},"responses":{"200":{"description":"Activity type created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivityTypeRow"}}}},"400":{"description":"Invalid input"}},"security":[{"bearer_auth":[]}]}},"/activity-types/resolve":{"get":{"tags":["activity-types"],"summary":"Resolve an activity type by name or alias.","operationId":"resolve_activity_type","parameters":[{"name":"name","in":"query","description":"Activity type name or alias to resolve","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Resolution result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResolveTypeResponse"}}}}}}},"/activity-types/{id}":{"get":{"tags":["activity-types"],"summary":"Get a single activity type by ID.","operationId":"get_activity_type","parameters":[{"name":"id","in":"path","description":"Activity type ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Activity type details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivityTypeRow"}}}},"404":{"description":"Activity type not found"}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Handler for user login","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"400":{"description":"Invalid input"},"401":{"description":"Invalid credentials"}}}},"/auth/me":{"get":{"tags":["auth"],"summary":"Handler to get current user","operationId":"me","responses":{"200":{"description":"Current user info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/auth/register":{"post":{"tags":["auth"],"summary":"Handler for user registration","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Registration successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"400":{"description":"Invalid input"},"409":{"description":"Email already registered"}}}},"/comments/{id}":{"delete":{"tags":["comments"],"summary":"Delete a comment.","operationId":"delete_comment","parameters":[{"name":"id","in":"path","description":"Comment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Comment deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Comment not found or not owned by user"}}}},"/countries":{"get":{"tags":["reference"],"summary":"Get list of countries with user counts for the filter dropdown.","operationId":"get_countries","responses":{"200":{"description":"List of countries with user counts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CountryStats"}}}}}}}},"/feed":{"get":{"tags":["feed"],"summary":"Get the activity feed for the authenticated user.\nReturns activities from users they follow.","operationId":"get_feed","parameters":[{"name":"limit","in":"query","description":"Maximum number of feed items to return","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of feed items to skip","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Activity feed","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FeedActivity"}}}}},"401":{"description":"Unauthorized"}}}},"/health":{"get":{"tags":["stats"],"summary":"Health check endpoint.","operationId":"health_check","responses":{"200":{"description":"Health check passed"}}}},"/invitations/{id}":{"get":{"tags":["teams"],"summary":"Get invitation details by token.","operationId":"get_invitation","parameters":[{"name":"id","in":"path","description":"Invitation token","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Invitation details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamInvitationWithDetails"}}}},"400":{"description":"Invitation has expired"},"404":{"description":"Invitation not found"}}}},"/invitations/{id}/accept":{"post":{"tags":["teams"],"summary":"Accept an invitation.","operationId":"accept_invitation","parameters":[{"name":"id","in":"path","description":"Invitation token","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Invitation accepted"},"400":{"description":"Invalid invitation or already a member"},"401":{"description":"Unauthorized"},"404":{"description":"Invitation not found"}}}},"/leaderboard/crowns":{"get":{"tags":["leaderboard"],"summary":"Get global crown count leaderboard.","operationId":"get_crown_leaderboard","parameters":[{"name":"limit","in":"query","description":"Maximum number of entries to return","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of entries to skip","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Crown count leaderboard","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CrownCountEntry"}}}}}}}},"/leaderboard/distance":{"get":{"tags":["leaderboard"],"summary":"Get global distance leaderboard.","operationId":"get_distance_leaderboard","parameters":[{"name":"limit","in":"query","description":"Maximum number of entries to return","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of entries to skip","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Distance leaderboard","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DistanceLeaderEntry"}}}}}}}},"/me/achievements":{"get":{"tags":["achievements"],"summary":"Get the authenticated user's achievements.","operationId":"get_my_achievements","parameters":[{"name":"include_lost","in":"query","required":false,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"User achievements","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AchievementWithSegment"}}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/notifications":{"get":{"tags":["notifications"],"summary":"Get notifications for the authenticated user.","operationId":"get_notifications","parameters":[{"name":"limit","in":"query","description":"Maximum number of notifications to return","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of notifications to skip","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of notifications","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}},"401":{"description":"Unauthorized"}}}},"/notifications/read-all":{"put":{"tags":["notifications"],"summary":"Mark all notifications as read.","operationId":"mark_all_notifications_read","responses":{"200":{"description":"All notifications marked as read","content":{"application/json":{"schema":{}}}},"401":{"description":"Unauthorized"}}}},"/notifications/{id}/read":{"put":{"tags":["notifications"],"summary":"Mark a notification as read.","operationId":"mark_notification_read","parameters":[{"name":"id","in":"path","description":"Notification ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Notification marked as read"},"401":{"description":"Unauthorized"},"404":{"description":"Notification not found"}}}},"/segments":{"get":{"tags":["segments"],"operationId":"list_segments","parameters":[{"name":"activity_type_id","in":"query","required":false,"schema":{"type":["string","null"],"format":"uuid"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"search","in":"query","description":"Case-insensitive name search","required":false,"schema":{"type":["string","null"]}},{"name":"sort_by","in":"query","description":"Sort field","required":false,"schema":{"$ref":"#/components/schemas/SegmentSortBy"}},{"name":"sort_order","in":"query","description":"Sort order","required":false,"schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"min_distance_meters","in":"query","description":"Minimum distance in meters","required":false,"schema":{"type":["number","null"],"format":"double"}},{"name":"max_distance_meters","in":"query","description":"Maximum distance in meters","required":false,"schema":{"type":["number","null"],"format":"double"}},{"name":"climb_category","in":"query","description":"Filter by climb category","required":false,"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ClimbCategoryFilter"}]}}],"responses":{"200":{"description":"List of segments","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Segment"}}}}},"500":{"description":"Internal server error"}}},"post":{"tags":["segments"],"operationId":"create_segment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSegmentRequest"}}},"required":true},"responses":{"200":{"description":"Segment created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Segment"}}}},"400":{"description":"Invalid input"},"401":{"description":"Unauthorized"}}}},"/segments/nearby":{"get":{"tags":["segments"],"operationId":"get_nearby_segments","parameters":[{"name":"lat","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"lon","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"radius_meters","in":"query","required":false,"schema":{"type":["number","null"],"format":"double"}},{"name":"limit","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int64"}}],"responses":{"200":{"description":"List of nearby segments","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Segment"}}}}},"500":{"description":"Internal server error"}}}},"/segments/preview":{"post":{"tags":["segments"],"summary":"Calculate segment metrics from a list of points without creating the segment.\nUseful for previewing what a segment would look like before creation.","operationId":"preview_segment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviewSegmentRequest"}}},"required":true},"responses":{"200":{"description":"Preview of segment metrics and validation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviewSegmentResponse"}}}},"400":{"description":"Invalid request"},"500":{"description":"Internal server error"}}}},"/segments/starred":{"get":{"tags":["segments"],"summary":"Get all segments starred by the authenticated user.","operationId":"get_starred_segments","responses":{"200":{"description":"List of starred segments","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Segment"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/segments/starred/efforts":{"get":{"tags":["segments"],"summary":"Get all starred segments with effort stats for the authenticated user.\nReturns each starred segment with the user's best effort, effort count, and leader time.","operationId":"get_starred_segment_efforts","responses":{"200":{"description":"List of starred segments with effort stats","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StarredSegmentEffort"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/segments/{id}":{"get":{"tags":["segments"],"operationId":"get_segment","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Segment"}}}},"404":{"description":"Segment not found"}}}},"/segments/{id}/achievements":{"get":{"tags":["achievements"],"summary":"Get current achievement holders for a segment.","operationId":"get_segment_achievements","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment achievement holders","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SegmentAchievements"}}}},"404":{"description":"Segment not found"}}}},"/segments/{id}/efforts/me":{"get":{"tags":["segments"],"operationId":"get_my_segment_efforts","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"User's efforts on segment","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SegmentEffort"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Segment not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/segments/{id}/leaderboard":{"get":{"tags":["segments"],"operationId":"get_segment_leaderboard","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment leaderboard","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SegmentEffort"}}}}},"404":{"description":"Segment not found"},"500":{"description":"Internal server error"}}}},"/segments/{id}/leaderboard/filtered":{"get":{"tags":["segments"],"summary":"Get filtered leaderboard for a segment.\nSupports time scope, gender, and age group filtering.","operationId":"get_filtered_leaderboard","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"scope","in":"query","required":false,"schema":{"$ref":"#/components/schemas/LeaderboardScope"}},{"name":"gender","in":"query","required":false,"schema":{"$ref":"#/components/schemas/GenderFilter"}},{"name":"age_group","in":"query","required":false,"schema":{"$ref":"#/components/schemas/AgeGroup"}},{"name":"weight_class","in":"query","required":false,"schema":{"$ref":"#/components/schemas/WeightClass"}},{"name":"country","in":"query","required":false,"schema":{"type":["string","null"]}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Filtered leaderboard","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaderboardResponse"}}}},"404":{"description":"Segment not found"},"500":{"description":"Internal server error"}}}},"/segments/{id}/leaderboard/position":{"get":{"tags":["segments"],"summary":"Get the authenticated user's position in a segment leaderboard.","operationId":"get_leaderboard_position","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"scope","in":"query","required":false,"schema":{"$ref":"#/components/schemas/LeaderboardScope"}},{"name":"gender","in":"query","required":false,"schema":{"$ref":"#/components/schemas/GenderFilter"}},{"name":"age_group","in":"query","required":false,"schema":{"$ref":"#/components/schemas/AgeGroup"}},{"name":"weight_class","in":"query","required":false,"schema":{"$ref":"#/components/schemas/WeightClass"}},{"name":"country","in":"query","required":false,"schema":{"type":["string","null"]}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User's leaderboard position with surrounding entries","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaderboardPosition"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Segment not found or user has no efforts"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/segments/{id}/reprocess":{"post":{"tags":["segments"],"summary":"Reprocess all activities to find matches for a specific segment.\nThis is useful when a new segment is created and we want to find\nall existing activities that pass through it.","operationId":"reprocess_segment","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Reprocessing results","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReprocessResult"}}}},"404":{"description":"Segment not found"},"500":{"description":"Internal server error"}}}},"/segments/{id}/star":{"post":{"tags":["segments"],"summary":"Star a segment for the authenticated user.","operationId":"star_segment","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment starred successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StarResponse"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Segment not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["segments"],"summary":"Unstar a segment for the authenticated user.","operationId":"unstar_segment","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment unstarred successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StarResponse"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/segments/{id}/starred":{"get":{"tags":["segments"],"summary":"Check if a segment is starred by the authenticated user.","operationId":"is_segment_starred","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Starred status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StarResponse"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/segments/{id}/teams":{"get":{"tags":["teams"],"summary":"Get teams a segment is shared with.","operationId":"get_segment_teams","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Teams the segment is shared with","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamSummary"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Segment not found"}}},"post":{"tags":["teams"],"summary":"Share a segment with teams.","operationId":"share_segment_with_teams","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareWithTeamsRequest"}}},"required":true},"responses":{"200":{"description":"Segment shared with teams"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - not the creator"},"404":{"description":"Segment not found"}}}},"/segments/{id}/track":{"get":{"tags":["segments"],"operationId":"get_segment_track","parameters":[{"name":"id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Segment track data with points and bounds","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SegmentTrackData"}}}},"401":{"description":"Unauthorized - private segment requires authentication"},"404":{"description":"Segment not found"},"500":{"description":"Internal server error"}}}},"/segments/{segment_id}/teams/{team_id}":{"delete":{"tags":["teams"],"summary":"Unshare a segment from a team.","operationId":"unshare_segment_from_team","parameters":[{"name":"segment_id","in":"path","description":"Segment ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"team_id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Segment unshared from team"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - not the creator"},"404":{"description":"Segment or sharing not found"}}}},"/stats":{"get":{"tags":["stats"],"summary":"Get platform-wide statistics (active users, segments created, activities uploaded).","operationId":"get_stats","responses":{"200":{"description":"Platform statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Stats"}}}}}}},"/teams":{"get":{"tags":["teams"],"summary":"List teams the authenticated user is a member of.","operationId":"list_my_teams","responses":{"200":{"description":"List of teams user is a member of","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamWithMembership"}}}}},"401":{"description":"Unauthorized"}}},"post":{"tags":["teams"],"summary":"Create a new team.","operationId":"create_team","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTeamRequest"}}},"required":true},"responses":{"201":{"description":"Team created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"401":{"description":"Unauthorized"}}}},"/teams/discover":{"get":{"tags":["teams"],"summary":"List discoverable teams.","operationId":"discover_teams","parameters":[{"name":"limit","in":"query","description":"Maximum number of teams to return","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of teams to skip","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of discoverable teams","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamSummary"}}}}}}}},"/teams/{id}":{"get":{"tags":["teams"],"summary":"Get a team by ID (with membership context for the current user).","operationId":"get_team","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Team details with membership context","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamWithMembership"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Team not found"}}},"put":{"tags":["teams"],"summary":"Update a team's settings.","operationId":"update_team","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTeamRequest"}}},"required":true},"responses":{"200":{"description":"Team updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - insufficient permissions"},"404":{"description":"Team not found"}}},"delete":{"tags":["teams"],"summary":"Delete a team.","operationId":"delete_team","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Team deleted"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - insufficient permissions"},"404":{"description":"Team not found"}}}},"/teams/{id}/activities":{"get":{"tags":["teams"],"summary":"Get activities shared with a team.","operationId":"get_team_activities","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"limit","in":"query","description":"Maximum number of results","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of results to skip","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Activities shared with the team","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FeedActivity"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Team not found or not a member"}}}},"/teams/{id}/invitations":{"get":{"tags":["teams"],"summary":"Get pending invitations for a team (admin only).","operationId":"get_team_invitations","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"List of pending invitations","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamInvitation"}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - insufficient permissions"},"404":{"description":"Team not found"}}},"post":{"tags":["teams"],"summary":"Create an invitation to join a team.","operationId":"invite_to_team","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteToTeamRequest"}}},"required":true},"responses":{"201":{"description":"Invitation created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamInvitation"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - insufficient permissions"},"404":{"description":"Team not found"}}}},"/teams/{id}/join":{"post":{"tags":["teams"],"summary":"Request to join a team (for request-based teams) or join directly (for open teams).","operationId":"join_team","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinTeamRequest"}}},"required":true},"responses":{"201":{"description":"Joined team directly (open policy)"},"202":{"description":"Join request submitted (request policy)"},"400":{"description":"Already a member or invitation-only team"},"401":{"description":"Unauthorized"},"404":{"description":"Team not found"}}}},"/teams/{id}/join-requests":{"get":{"tags":["teams"],"summary":"Get pending join requests for a team (admin only).","operationId":"get_join_requests","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"List of pending join requests","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamJoinRequestWithUser"}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Team not found"}}}},"/teams/{id}/leave":{"post":{"tags":["teams"],"summary":"Leave a team.","operationId":"leave_team","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Left team"},"400":{"description":"Owner cannot leave team"},"401":{"description":"Unauthorized"},"404":{"description":"Team not found or not a member"}}}},"/teams/{id}/members":{"get":{"tags":["teams"],"summary":"List members of a team.","operationId":"list_team_members","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"List of team members","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamMember"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Team not found"}}}},"/teams/{id}/segments":{"get":{"tags":["teams"],"summary":"Get segments shared with a team.","operationId":"get_team_segments","parameters":[{"name":"id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"limit","in":"query","description":"Maximum number of results","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Number of results to skip","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Segments shared with the team","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Segment"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Team not found or not a member"}}}},"/teams/{team_id}/invitations/{invitation_id}":{"delete":{"tags":["teams"],"summary":"Revoke an invitation.","operationId":"revoke_invitation","parameters":[{"name":"team_id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"invitation_id","in":"path","description":"Invitation ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Invitation revoked"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - insufficient permissions"},"404":{"description":"Invitation not found"}}}},"/teams/{team_id}/join-requests/{request_id}":{"put":{"tags":["teams"],"summary":"Approve or reject a join request.","operationId":"review_join_request","parameters":[{"name":"team_id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"request_id","in":"path","description":"Join request ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewJoinRequestRequest"}}},"required":true},"responses":{"204":{"description":"Request reviewed"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Team or request not found"}}}},"/teams/{team_id}/members/{user_id}":{"delete":{"tags":["teams"],"summary":"Remove a member from a team (admin/owner) or leave team (self).","operationId":"remove_team_member","parameters":[{"name":"team_id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"user_id","in":"path","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Member removed"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Team or member not found"}}}},"/teams/{team_id}/members/{user_id}/role":{"put":{"tags":["teams"],"summary":"Change a member's role.","operationId":"change_member_role","parameters":[{"name":"team_id","in":"path","description":"Team ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"user_id","in":"path","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeMemberRoleRequest"}}},"required":true},"responses":{"200":{"description":"Role changed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamMembership"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Team or member not found"}}}},"/users":{"get":{"tags":["users"],"summary":"Get all users.","operationId":"all_users","responses":{"200":{"description":"List of all users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}},"/users/me/demographics":{"get":{"tags":["users"],"summary":"Get the authenticated user's profile with demographics.","operationId":"get_my_demographics","responses":{"200":{"description":"User demographics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithDemographics"}}}},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}},"security":[{"bearer_auth":[]}]},"patch":{"tags":["users"],"summary":"Update the authenticated user's demographics.","operationId":"update_my_demographics","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDemographicsRequest"}}},"required":true},"responses":{"200":{"description":"Demographics updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithDemographics"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/users/new":{"get":{"tags":["users"],"summary":"Create a new user.","operationId":"new_user","parameters":[{"name":"name","in":"query","description":"User's name","required":true,"schema":{"type":"string"}},{"name":"email","in":"query","description":"User's email address","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid input"}}}},"/users/{id}/achievements":{"get":{"tags":["achievements"],"summary":"Get achievements for a specific user.","operationId":"get_user_achievements","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"include_lost","in":"query","required":false,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"User achievements","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AchievementWithSegment"}}}}},"404":{"description":"User not found"}}}},"/users/{id}/activities":{"get":{"tags":["activities"],"summary":"Get activities for a user.","operationId":"get_user_activities","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"List of user's activities","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Activity"}}}}}}}},"/users/{id}/follow":{"post":{"tags":["social"],"summary":"Follow a user.","operationId":"follow_user","parameters":[{"name":"id","in":"path","description":"User ID to follow","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Already following (idempotent)"},"201":{"description":"Successfully followed user"},"400":{"description":"Cannot follow yourself"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}},"delete":{"tags":["social"],"summary":"Unfollow a user.","operationId":"unfollow_user","parameters":[{"name":"id","in":"path","description":"User ID to unfollow","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Successfully unfollowed user"},"401":{"description":"Unauthorized"},"404":{"description":"Was not following this user"}}}},"/users/{id}/follow/status":{"get":{"tags":["social"],"summary":"Check if the authenticated user is following a specific user.","operationId":"get_follow_status","parameters":[{"name":"id","in":"path","description":"User ID to check follow status for","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Follow status retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FollowStatusResponse"}}}},"401":{"description":"Unauthorized"}}}},"/users/{id}/followers":{"get":{"tags":["social"],"summary":"Get a user's followers.","operationId":"get_followers","parameters":[{"name":"id","in":"path","description":"User ID to get followers for","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"limit","in":"query","description":"Maximum number of results","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Offset for pagination","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Followers retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FollowListResponse"}}}}}}},"/users/{id}/following":{"get":{"tags":["social"],"summary":"Get users that a user is following.","operationId":"get_following","parameters":[{"name":"id","in":"path","description":"User ID to get following list for","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"limit","in":"query","description":"Maximum number of results","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Offset for pagination","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Following list retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FollowListResponse"}}}}}}},"/users/{id}/profile":{"get":{"tags":["social"],"summary":"Get a user's profile with follow counts.","operationId":"get_user_profile","parameters":[{"name":"id","in":"path","description":"User ID to get profile for","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"User profile retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"404":{"description":"User not found"}}}}},"components":{"schemas":{"Achievement":{"type":"object","description":"An achievement/crown earned by a user","required":["id","user_id","segment_id","achievement_type","earned_at","created_at"],"properties":{"achievement_type":{"$ref":"#/components/schemas/AchievementType"},"created_at":{"type":"string","format":"date-time"},"earned_at":{"type":"string","format":"date-time"},"effort_count":{"type":["integer","null"],"format":"int32"},"effort_id":{"type":["string","null"],"format":"uuid"},"id":{"type":"string","format":"uuid"},"lost_at":{"type":["string","null"],"format":"date-time"},"segment_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"AchievementHolder":{"type":"object","description":"Holder of an achievement with their details","required":["user_id","user_name","achievement_type","earned_at"],"properties":{"achievement_type":{"$ref":"#/components/schemas/AchievementType"},"earned_at":{"type":"string","format":"date-time"},"effort_count":{"type":["integer","null"],"format":"int32"},"elapsed_time_seconds":{"type":["number","null"],"format":"double"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"AchievementType":{"type":"string","description":"Type of achievement/crown","enum":["kom","qom","course_record"]},"AchievementWithSegment":{"type":"object","description":"Achievement with segment details for display","required":["id","user_id","segment_id","achievement_type","earned_at","segment_name","segment_distance_meters","segment_activity_type_id"],"properties":{"achievement_type":{"$ref":"#/components/schemas/AchievementType"},"earned_at":{"type":"string","format":"date-time"},"effort_count":{"type":["integer","null"],"format":"int32"},"effort_id":{"type":["string","null"],"format":"uuid"},"id":{"type":"string","format":"uuid"},"lost_at":{"type":["string","null"],"format":"date-time"},"segment_activity_type_id":{"type":"string","format":"uuid"},"segment_distance_meters":{"type":"number","format":"double"},"segment_id":{"type":"string","format":"uuid"},"segment_name":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"Activity":{"type":"object","required":["id","user_id","activity_type_id","name","object_store_path","submitted_at","visibility"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"object_store_path":{"type":"string"},"segment_types":{"type":["array","null"],"items":{"type":"string","format":"uuid"}},"submitted_at":{"type":"string","format":"date-time"},"type_boundaries":{"type":["array","null"],"items":{"type":"string","format":"date-time"}},"user_id":{"type":"string","format":"uuid"},"visibility":{"type":"string"}}},"ActivitySegmentEffort":{"type":"object","description":"Segment effort with segment details, for displaying on activity detail page.","required":["effort_id","segment_id","elapsed_time_seconds","is_personal_record","started_at","segment_name","segment_distance","activity_type_id","rank"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"effort_id":{"type":"string","format":"uuid"},"elapsed_time_seconds":{"type":"number","format":"double"},"end_fraction":{"type":["number","null"],"format":"double"},"is_personal_record":{"type":"boolean"},"rank":{"type":"integer","format":"int64"},"segment_distance":{"type":"number","format":"double"},"segment_id":{"type":"string","format":"uuid"},"segment_name":{"type":"string"},"start_fraction":{"type":["number","null"],"format":"double"},"started_at":{"type":"string","format":"date-time"}}},"ActivityTypeRow":{"type":"object","description":"Row from the activity_types table","required":["id","name","is_builtin","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"created_by":{"type":["string","null"],"format":"uuid"},"id":{"type":"string","format":"uuid"},"is_builtin":{"type":"boolean"},"name":{"type":"string"}}},"AddCommentRequest":{"type":"object","description":"Request to add a comment.","required":["content"],"properties":{"content":{"type":"string"},"parent_id":{"type":["string","null"],"format":"uuid"}}},"AgeGroup":{"type":"string","description":"Age group for demographic filtering (5-year brackets for younger, 10-year for older)","enum":["all","18-24","25-29","30-34","35-39","40-49","50-59","60+"]},"AuthResponse":{"type":"object","required":["token","user"],"properties":{"token":{"type":"string"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"ChangeMemberRoleRequest":{"type":"object","description":"Request to change a member's role","required":["role"],"properties":{"role":{"$ref":"#/components/schemas/TeamRole"}}},"ClimbCategoryFilter":{"type":"string","enum":["hc","cat1","cat2","cat3","cat4","flat"]},"Comment":{"type":"object","description":"A comment on an activity","required":["id","user_id","activity_id","content","created_at"],"properties":{"activity_id":{"type":"string","format":"uuid"},"content":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"deleted_at":{"type":["string","null"],"format":"date-time"},"id":{"type":"string","format":"uuid"},"parent_id":{"type":["string","null"],"format":"uuid"},"updated_at":{"type":["string","null"],"format":"date-time"},"user_id":{"type":"string","format":"uuid"}}},"CommentWithUser":{"type":"object","description":"Comment with user info for display","required":["id","user_id","activity_id","content","created_at","user_name"],"properties":{"activity_id":{"type":"string","format":"uuid"},"content":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"parent_id":{"type":["string","null"],"format":"uuid"},"updated_at":{"type":["string","null"],"format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"CountryStats":{"type":"object","description":"Country with user count for the countries dropdown","required":["country","user_count"],"properties":{"country":{"type":"string"},"user_count":{"type":"integer","format":"int64"}}},"CreateActivityTypeRequest":{"type":"object","description":"Request to create a custom activity type","required":["name"],"properties":{"name":{"type":"string"}}},"CreateSegmentRequest":{"type":"object","required":["name","points"],"properties":{"activity_type_id":{"type":["string","null"],"format":"uuid","description":"Optional if source_activity_id is provided (inherits from the activity).\nRequired if source_activity_id is not provided."},"description":{"type":["string","null"]},"name":{"type":"string"},"points":{"type":"array","items":{"$ref":"#/components/schemas/SegmentPoint"}},"source_activity_id":{"type":["string","null"],"format":"uuid","description":"Optional: the activity this segment was created from.\nIf provided, the segment inherits its activity_type_id and guarantees that activity gets the first effort."},"team_ids":{"type":["array","null"],"items":{"type":"string","format":"uuid"},"description":"Team IDs to share the segment with (for teams_only visibility)"},"visibility":{"type":"string"}}},"CreateTeamRequest":{"type":"object","description":"Request to create a team","required":["name"],"properties":{"avatar_url":{"type":["string","null"]},"description":{"type":["string","null"]},"join_policy":{"$ref":"#/components/schemas/TeamJoinPolicy"},"name":{"type":"string"},"visibility":{"$ref":"#/components/schemas/TeamVisibility"}}},"CrownCountEntry":{"type":"object","description":"Entry in global crown count leaderboard","required":["user_id","user_name","kom_count","qom_count","total_crowns","rank"],"properties":{"kom_count":{"type":"integer","format":"int64"},"qom_count":{"type":"integer","format":"int64"},"rank":{"type":"integer","format":"int64"},"total_crowns":{"type":"integer","format":"int64"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"DiscoverTeamsQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"DistanceLeaderEntry":{"type":"object","description":"Entry in global distance leaderboard","required":["user_id","user_name","total_distance_meters","activity_count","rank"],"properties":{"activity_count":{"type":"integer","format":"int64"},"rank":{"type":"integer","format":"int64"},"total_distance_meters":{"type":"number","format":"double"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"FeedActivity":{"type":"object","description":"Activity with user and stats for the feed","required":["id","user_id","name","activity_type_id","submitted_at","visibility","user_name","kudos_count","comment_count"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"comment_count":{"type":"integer","format":"int32"},"distance":{"type":["number","null"],"format":"double"},"duration":{"type":["number","null"],"format":"double"},"elevation_gain":{"type":["number","null"],"format":"double"},"id":{"type":"string","format":"uuid"},"kudos_count":{"type":"integer","format":"int32"},"name":{"type":"string"},"submitted_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"},"visibility":{"type":"string"}}},"FeedQuery":{"type":"object","description":"Query parameters for activity feed.","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"Follow":{"type":"object","description":"A follow relationship between two users","required":["follower_id","following_id","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"follower_id":{"type":"string","format":"uuid"},"following_id":{"type":"string","format":"uuid"}}},"FollowListQuery":{"type":"object","description":"Query parameters for follow list endpoints.","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"FollowListResponse":{"type":"object","description":"Response for follower/following lists.","required":["users","total_count"],"properties":{"total_count":{"type":"integer","format":"int32"},"users":{"type":"array","items":{"$ref":"#/components/schemas/UserSummary"}}}},"FollowStatusResponse":{"type":"object","description":"Response for follow status check.","required":["is_following"],"properties":{"is_following":{"type":"boolean"}}},"Gender":{"type":"string","description":"User gender for demographic filtering","enum":["male","female","other","prefer_not_to_say"]},"GenderFilter":{"type":"string","description":"Gender filter for leaderboards (includes \"all\" option)","enum":["all","male","female"]},"GetAchievementsQuery":{"type":"object","description":"Query parameters for achievements endpoints.","properties":{"include_lost":{"type":"boolean"}}},"GlobalLeaderboardQuery":{"type":"object","description":"Query parameters for global leaderboards.","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"InviteToTeamRequest":{"type":"object","description":"Request to invite a user to a team","required":["email"],"properties":{"email":{"type":"string"},"role":{"$ref":"#/components/schemas/TeamRole"}}},"JoinTeamRequest":{"type":"object","description":"Request to join a team","properties":{"message":{"type":["string","null"]}}},"KudosGiver":{"type":"object","description":"User who gave kudos","required":["user_id","user_name","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"KudosResponse":{"type":"object","description":"Response for kudos operations.","required":["given","kudos_count"],"properties":{"given":{"type":"boolean"},"kudos_count":{"type":"integer","format":"int32"}}},"KudosStatusResponse":{"type":"object","description":"Response for kudos status check.","required":["has_given"],"properties":{"has_given":{"type":"boolean"}}},"LeaderboardEntry":{"type":"object","description":"A single entry in the leaderboard with user info and ranking","required":["effort_id","elapsed_time_seconds","started_at","is_personal_record","user_id","user_name","rank"],"properties":{"average_speed_mps":{"type":["number","null"],"format":"double"},"effort_id":{"type":"string","format":"uuid"},"elapsed_time_seconds":{"type":"number","format":"double"},"gap_seconds":{"type":["number","null"],"format":"double"},"is_personal_record":{"type":"boolean"},"moving_time_seconds":{"type":["number","null"],"format":"double"},"rank":{"type":"integer","format":"int64"},"started_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"LeaderboardFilters":{"type":"object","description":"Query parameters for filtered leaderboard requests","properties":{"age_group":{"$ref":"#/components/schemas/AgeGroup"},"country":{"type":["string","null"]},"gender":{"$ref":"#/components/schemas/GenderFilter"},"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"scope":{"$ref":"#/components/schemas/LeaderboardScope"},"weight_class":{"$ref":"#/components/schemas/WeightClass"}}},"LeaderboardFiltersResponse":{"type":"object","description":"Echoed filters in leaderboard response","required":["scope","gender","age_group","weight_class","limit","offset"],"properties":{"age_group":{"$ref":"#/components/schemas/AgeGroup"},"country":{"type":["string","null"]},"gender":{"$ref":"#/components/schemas/GenderFilter"},"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"scope":{"$ref":"#/components/schemas/LeaderboardScope"},"weight_class":{"$ref":"#/components/schemas/WeightClass"}}},"LeaderboardPosition":{"type":"object","description":"User's position in the leaderboard with surrounding entries","required":["user_rank","user_entry","entries_above","entries_below","total_count"],"properties":{"entries_above":{"type":"array","items":{"$ref":"#/components/schemas/LeaderboardEntry"}},"entries_below":{"type":"array","items":{"$ref":"#/components/schemas/LeaderboardEntry"}},"total_count":{"type":"integer","format":"int64"},"user_entry":{"$ref":"#/components/schemas/LeaderboardEntry"},"user_rank":{"type":"integer","format":"int64"}}},"LeaderboardResponse":{"type":"object","description":"Response for paginated leaderboard","required":["entries","total_count","filters"],"properties":{"entries":{"type":"array","items":{"$ref":"#/components/schemas/LeaderboardEntry"}},"filters":{"$ref":"#/components/schemas/LeaderboardFiltersResponse"},"total_count":{"type":"integer","format":"int64"}}},"LeaderboardScope":{"type":"string","description":"Time scope for leaderboard filtering","enum":["all_time","year","month","week"]},"ListSegmentsQuery":{"type":"object","properties":{"activity_type_id":{"type":["string","null"],"format":"uuid"},"climb_category":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ClimbCategoryFilter","description":"Filter by climb category"}]},"limit":{"type":"integer","format":"int64"},"max_distance_meters":{"type":["number","null"],"format":"double","description":"Maximum distance in meters"},"min_distance_meters":{"type":["number","null"],"format":"double","description":"Minimum distance in meters"},"search":{"type":["string","null"],"description":"Case-insensitive name search"},"sort_by":{"$ref":"#/components/schemas/SegmentSortBy","description":"Sort field"},"sort_order":{"$ref":"#/components/schemas/SortOrder","description":"Sort order"}}},"LoginRequest":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"}}},"NearbySegmentsQuery":{"type":"object","required":["lat","lon"],"properties":{"lat":{"type":"number","format":"double"},"limit":{"type":["integer","null"],"format":"int64"},"lon":{"type":"number","format":"double"},"radius_meters":{"type":["number","null"],"format":"double"}}},"Notification":{"type":"object","description":"A notification for a user","required":["id","user_id","notification_type","created_at"],"properties":{"actor_id":{"type":["string","null"],"format":"uuid"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"notification_type":{"type":"string"},"read_at":{"type":["string","null"],"format":"date-time"},"target_id":{"type":["string","null"],"format":"uuid"},"target_type":{"type":["string","null"]},"user_id":{"type":"string","format":"uuid"}}},"NotificationType":{"type":"string","description":"Type of notification","enum":["follow","kudos","comment","crown_achieved","crown_lost","personal_record"]},"NotificationWithActor":{"type":"object","description":"Notification with actor details for display","required":["id","user_id","notification_type","created_at"],"properties":{"actor_id":{"type":["string","null"],"format":"uuid"},"actor_name":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"notification_type":{"type":"string"},"read_at":{"type":["string","null"],"format":"date-time"},"target_id":{"type":["string","null"],"format":"uuid"},"target_type":{"type":["string","null"]},"user_id":{"type":"string","format":"uuid"}}},"NotificationsQuery":{"type":"object","description":"Query parameters for notifications.","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"NotificationsResponse":{"type":"object","description":"Response for notifications list with unread count","required":["notifications","unread_count","total_count"],"properties":{"notifications":{"type":"array","items":{"$ref":"#/components/schemas/NotificationWithActor"}},"total_count":{"type":"integer","format":"int64"},"unread_count":{"type":"integer","format":"int64"}}},"PreviewSegmentRequest":{"type":"object","required":["points"],"properties":{"points":{"type":"array","items":{"$ref":"#/components/schemas/SegmentPoint"}}}},"PreviewSegmentResponse":{"type":"object","required":["distance_meters","point_count","validation"],"properties":{"average_grade":{"type":["number","null"],"format":"double"},"climb_category":{"type":["integer","null"],"format":"int32"},"distance_meters":{"type":"number","format":"double"},"elevation_gain_meters":{"type":["number","null"],"format":"double"},"elevation_loss_meters":{"type":["number","null"],"format":"double"},"max_grade":{"type":["number","null"],"format":"double"},"point_count":{"type":"integer","minimum":0},"validation":{"$ref":"#/components/schemas/SegmentValidation"}}},"RegisterRequest":{"type":"object","required":["email","password","name"],"properties":{"email":{"type":"string"},"name":{"type":"string"},"password":{"type":"string"}}},"ReprocessResult":{"type":"object","required":["segment_id","activities_checked","efforts_created"],"properties":{"activities_checked":{"type":"integer","minimum":0},"efforts_created":{"type":"integer","minimum":0},"segment_id":{"type":"string","format":"uuid"}}},"ResolveTypeQuery":{"type":"object","description":"Activity type resolution query.","required":["name"],"properties":{"name":{"type":"string"}}},"ResolveTypeResponse":{"type":"object","description":"Activity type resolution response.","required":["result"],"properties":{"result":{"type":"string","description":"\"exact\", \"ambiguous\", or \"not_found\""},"type_id":{"type":["string","null"],"format":"uuid"},"type_ids":{"type":["array","null"],"items":{"type":"string","format":"uuid"}}}},"ReviewJoinRequestRequest":{"type":"object","required":["approved"],"properties":{"approved":{"type":"boolean"}}},"Segment":{"type":"object","required":["id","creator_id","name","activity_type_id","distance_meters","visibility","created_at"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"average_grade":{"type":["number","null"],"format":"double"},"climb_category":{"type":["integer","null"],"format":"int32"},"created_at":{"type":"string","format":"date-time"},"creator_id":{"type":"string","format":"uuid"},"creator_name":{"type":["string","null"]},"description":{"type":["string","null"]},"distance_meters":{"type":"number","format":"double"},"elevation_gain_meters":{"type":["number","null"],"format":"double"},"elevation_loss_meters":{"type":["number","null"],"format":"double"},"id":{"type":"string","format":"uuid"},"max_grade":{"type":["number","null"],"format":"double"},"name":{"type":"string"},"visibility":{"type":"string"}}},"SegmentAchievements":{"type":"object","description":"Current achievement holders for a segment","required":["segment_id"],"properties":{"kom":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/AchievementHolder"}]},"qom":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/AchievementHolder"}]},"segment_id":{"type":"string","format":"uuid"}}},"SegmentEffort":{"type":"object","required":["id","segment_id","activity_id","user_id","started_at","elapsed_time_seconds","is_personal_record","created_at"],"properties":{"activity_id":{"type":"string","format":"uuid"},"average_speed_mps":{"type":["number","null"],"format":"double"},"created_at":{"type":"string","format":"date-time"},"elapsed_time_seconds":{"type":"number","format":"double"},"end_fraction":{"type":["number","null"],"format":"double"},"id":{"type":"string","format":"uuid"},"is_personal_record":{"type":"boolean"},"max_speed_mps":{"type":["number","null"],"format":"double"},"moving_time_seconds":{"type":["number","null"],"format":"double"},"segment_id":{"type":"string","format":"uuid"},"start_fraction":{"type":["number","null"],"format":"double"},"started_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":["string","null"]}}},"SegmentPoint":{"type":"object","required":["lat","lon"],"properties":{"ele":{"type":["number","null"],"format":"double"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"}}},"SegmentSortBy":{"type":"string","enum":["created_at","name","distance","elevation_gain"]},"SegmentTrackData":{"type":"object","required":["points","bounds"],"properties":{"bounds":{"$ref":"#/components/schemas/TrackBounds"},"points":{"type":"array","items":{"$ref":"#/components/schemas/SegmentTrackPoint"}}}},"SegmentTrackPoint":{"type":"object","required":["lat","lon"],"properties":{"ele":{"type":["number","null"],"format":"double"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"}}},"SegmentValidation":{"type":"object","required":["is_valid","errors"],"properties":{"errors":{"type":"array","items":{"type":"string"}},"is_valid":{"type":"boolean"}}},"SegmentWithStats":{"allOf":[{"$ref":"#/components/schemas/Segment"},{"type":"object","required":["effort_count","athlete_count","creator_name"],"properties":{"athlete_count":{"type":"integer","format":"int64"},"creator_name":{"type":"string"},"effort_count":{"type":"integer","format":"int64"}}}]},"ShareWithTeamsRequest":{"type":"object","description":"Request to share activity/segment with teams","required":["team_ids"],"properties":{"team_ids":{"type":"array","items":{"type":"string","format":"uuid"}}}},"SortOrder":{"type":"string","enum":["asc","desc"]},"StarResponse":{"type":"object","required":["starred"],"properties":{"starred":{"type":"boolean"}}},"StarredSegmentEffort":{"type":"object","description":"Starred segment with the user's effort stats, for the starred segments dashboard.","required":["segment_id","segment_name","activity_type_id","distance_meters","user_effort_count"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"best_effort_date":{"type":["string","null"],"format":"date-time"},"best_effort_rank":{"type":["integer","null"],"format":"int64"},"best_time_seconds":{"type":["number","null"],"format":"double"},"distance_meters":{"type":"number","format":"double"},"elevation_gain_meters":{"type":["number","null"],"format":"double"},"leader_time_seconds":{"type":["number","null"],"format":"double"},"segment_id":{"type":"string","format":"uuid"},"segment_name":{"type":"string"},"user_effort_count":{"type":"integer","format":"int64"}}},"Stats":{"type":"object","description":"Platform statistics for the homepage","required":["active_users","segments_created","activities_uploaded"],"properties":{"active_users":{"type":"integer","format":"int64"},"activities_uploaded":{"type":"integer","format":"int64"},"segments_created":{"type":"integer","format":"int64"}}},"Team":{"type":"object","description":"A team for sharing activities and segments","required":["id","name","visibility","join_policy","owner_id","member_count","activity_count","segment_count","created_at"],"properties":{"activity_count":{"type":"integer","format":"int32"},"avatar_url":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"description":{"type":["string","null"]},"id":{"type":"string","format":"uuid"},"join_policy":{"$ref":"#/components/schemas/TeamJoinPolicy"},"member_count":{"type":"integer","format":"int32"},"name":{"type":"string"},"owner_id":{"type":"string","format":"uuid"},"segment_count":{"type":"integer","format":"int32"},"updated_at":{"type":["string","null"],"format":"date-time"},"visibility":{"$ref":"#/components/schemas/TeamVisibility"}}},"TeamContentQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"TeamInvitation":{"type":"object","description":"An invitation to join a team","required":["id","team_id","email","invited_by","role","token","expires_at","created_at"],"properties":{"accepted_at":{"type":["string","null"],"format":"date-time"},"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"expires_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"invited_by":{"type":"string","format":"uuid"},"role":{"$ref":"#/components/schemas/TeamRole"},"team_id":{"type":"string","format":"uuid"},"token":{"type":"string"}}},"TeamInvitationWithDetails":{"type":"object","description":"Invitation with additional context","required":["id","team_id","team_name","email","invited_by","invited_by_name","role","expires_at","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"expires_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"invited_by":{"type":"string","format":"uuid"},"invited_by_name":{"type":"string"},"role":{"$ref":"#/components/schemas/TeamRole"},"team_id":{"type":"string","format":"uuid"},"team_name":{"type":"string"}}},"TeamJoinPolicy":{"type":"string","description":"Team join policy","enum":["open","request","invitation"]},"TeamJoinRequest":{"type":"object","description":"Request to join a team","required":["id","team_id","user_id","status","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"reviewed_at":{"type":["string","null"],"format":"date-time"},"reviewed_by":{"type":["string","null"],"format":"uuid"},"status":{"type":"string"},"team_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"TeamJoinRequestWithUser":{"type":"object","description":"Join request with user details for admin review","required":["id","team_id","user_id","user_name","status","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"status":{"type":"string"},"team_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"TeamMember":{"type":"object","description":"Team member with user details","required":["user_id","user_name","role","joined_at"],"properties":{"invited_by":{"type":["string","null"],"format":"uuid"},"invited_by_name":{"type":["string","null"]},"joined_at":{"type":"string","format":"date-time"},"role":{"$ref":"#/components/schemas/TeamRole"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"TeamMembership":{"type":"object","description":"A membership in a team","required":["team_id","user_id","role","joined_at"],"properties":{"invited_by":{"type":["string","null"],"format":"uuid"},"joined_at":{"type":"string","format":"date-time"},"role":{"$ref":"#/components/schemas/TeamRole"},"team_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"TeamRole":{"type":"string","description":"Team role enum","enum":["owner","admin","member"]},"TeamSummary":{"type":"object","description":"Team summary for listings","required":["id","name","member_count","activity_count","segment_count"],"properties":{"activity_count":{"type":"integer","format":"int32"},"avatar_url":{"type":["string","null"]},"description":{"type":["string","null"]},"id":{"type":"string","format":"uuid"},"member_count":{"type":"integer","format":"int32"},"name":{"type":"string"},"segment_count":{"type":"integer","format":"int32"}}},"TeamVisibility":{"type":"string","description":"Team visibility (whether team is discoverable)","enum":["public","private"]},"TeamWithMembership":{"allOf":[{"$ref":"#/components/schemas/Team"},{"type":"object","required":["is_member","owner_name"],"properties":{"is_member":{"type":"boolean"},"owner_name":{"type":"string"},"user_role":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TeamRole"}]}}}],"description":"Team with additional context for the current user"},"TrackBounds":{"type":"object","description":"Geographic bounds for a track.","required":["min_lat","max_lat","min_lon","max_lon"],"properties":{"max_lat":{"type":"number","format":"double"},"max_lon":{"type":"number","format":"double"},"min_lat":{"type":"number","format":"double"},"min_lon":{"type":"number","format":"double"}}},"TrackData":{"type":"object","description":"Activity track data response.","required":["points","bounds"],"properties":{"bounds":{"$ref":"#/components/schemas/TrackBounds"},"points":{"type":"array","items":{"$ref":"#/components/schemas/TrackPoint"}}}},"TrackPoint":{"type":"object","description":"Track point in activity track data.","required":["lat","lon"],"properties":{"ele":{"type":["number","null"],"format":"double"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"},"time":{"type":["string","null"]}}},"UpdateActivityRequest":{"type":"object","description":"Activity update request.","properties":{"activity_type_id":{"type":["string","null"],"format":"uuid"},"name":{"type":["string","null"]},"visibility":{"type":["string","null"]}}},"UpdateDemographicsRequest":{"type":"object","description":"Request to update user demographics","properties":{"birth_year":{"type":["integer","null"],"format":"int32"},"country":{"type":["string","null"]},"gender":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Gender"}]},"region":{"type":["string","null"]},"weight_kg":{"type":["number","null"],"format":"double"}}},"UpdateTeamRequest":{"type":"object","description":"Request to update a team","properties":{"avatar_url":{"type":["string","null"]},"description":{"type":["string","null"]},"join_policy":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TeamJoinPolicy"}]},"name":{"type":["string","null"]},"visibility":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TeamVisibility"}]}}},"UploadQuery":{"type":"object","description":"Activity upload query parameters.","required":["activity_type_id","name"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"name":{"type":"string"},"segment_types":{"type":["string","null"],"description":"Multi-sport: Comma-separated activity type UUIDs for each segment"},"team_ids":{"type":["string","null"],"description":"Comma-separated list of team IDs to share with (for teams_only visibility)"},"type_boundaries":{"type":["string","null"],"description":"Multi-sport: Comma-separated ISO-8601 timestamps marking segment boundaries"},"visibility":{"type":["string","null"]}}},"User":{"type":"object","required":["id","email","name","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"UserProfile":{"type":"object","description":"User profile with follow counts for display","required":["id","email","name","created_at","follower_count","following_count"],"properties":{"birth_year":{"type":["integer","null"],"format":"int32"},"country":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"follower_count":{"type":"integer","format":"int32"},"following_count":{"type":"integer","format":"int32"},"gender":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Gender"}]},"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"region":{"type":["string","null"]},"weight_kg":{"type":["number","null"],"format":"double"}}},"UserResponse":{"type":"object","required":["id","email","name"],"properties":{"email":{"type":"string"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"UserSummary":{"type":"object","description":"Summary of a user for follower/following lists","required":["id","name","follower_count","following_count","followed_at"],"properties":{"followed_at":{"type":"string","format":"date-time"},"follower_count":{"type":"integer","format":"int32"},"following_count":{"type":"integer","format":"int32"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"UserWithDemographics":{"type":"object","description":"User profile with demographics","required":["id","email","name","created_at"],"properties":{"birth_year":{"type":["integer","null"],"format":"int32"},"country":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"gender":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Gender"}]},"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"region":{"type":["string","null"]},"weight_kg":{"type":["number","null"],"format":"double"}}},"Visibility":{"type":"string","enum":["public","private"]},"WeightClass":{"type":"string","description":"Weight class for leaderboard filtering","enum":["all","featherweight","lightweight","welterweight","middleweight","cruiserweight","heavyweight"]}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer"}}},"security":[{"bearer_auth":[]}],"tags":[{"name":"auth","description":"Authentication endpoints"},{"name":"users","description":"User management endpoints"},{"name":"activities","description":"Activity management endpoints"},{"name":"segments","description":"Segment management endpoints"},{"name":"leaderboards","description":"Leaderboard endpoints"},{"name":"social","description":"Social features (follows, kudos, comments)"},{"name":"notifications","description":"Notification endpoints"},{"name":"teams","description":"Team management endpoints"},{"name":"stats","description":"Platform statistics"}]}
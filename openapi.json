{"openapi":"3.1.0","info":{"title":"Track Leader API","description":"API for Track Leader - Activity tracking and segment leaderboards","license":{"name":"MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8000","description":"Local development server"}],"paths":{},"components":{"schemas":{"Achievement":{"type":"object","description":"An achievement/crown earned by a user","required":["id","user_id","segment_id","achievement_type","earned_at","created_at"],"properties":{"achievement_type":{"$ref":"#/components/schemas/AchievementType"},"created_at":{"type":"string","format":"date-time"},"earned_at":{"type":"string","format":"date-time"},"effort_count":{"type":["integer","null"],"format":"int32"},"effort_id":{"type":["string","null"],"format":"uuid"},"id":{"type":"string","format":"uuid"},"lost_at":{"type":["string","null"],"format":"date-time"},"segment_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"AchievementHolder":{"type":"object","description":"Holder of an achievement with their details","required":["user_id","user_name","achievement_type","earned_at"],"properties":{"achievement_type":{"$ref":"#/components/schemas/AchievementType"},"earned_at":{"type":"string","format":"date-time"},"effort_count":{"type":["integer","null"],"format":"int32"},"elapsed_time_seconds":{"type":["number","null"],"format":"double"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"AchievementType":{"type":"string","description":"Type of achievement/crown","enum":["kom","qom","local_legend","course_record"]},"AchievementWithSegment":{"type":"object","description":"Achievement with segment details for display","required":["id","user_id","segment_id","achievement_type","earned_at","segment_name","segment_distance_meters","segment_activity_type_id"],"properties":{"achievement_type":{"$ref":"#/components/schemas/AchievementType"},"earned_at":{"type":"string","format":"date-time"},"effort_count":{"type":["integer","null"],"format":"int32"},"effort_id":{"type":["string","null"],"format":"uuid"},"id":{"type":"string","format":"uuid"},"lost_at":{"type":["string","null"],"format":"date-time"},"segment_activity_type_id":{"type":"string","format":"uuid"},"segment_distance_meters":{"type":"number","format":"double"},"segment_id":{"type":"string","format":"uuid"},"segment_name":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"Activity":{"type":"object","required":["id","user_id","activity_type_id","name","object_store_path","submitted_at","visibility"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"object_store_path":{"type":"string"},"segment_types":{"type":["array","null"],"items":{"type":"string","format":"uuid"}},"submitted_at":{"type":"string","format":"date-time"},"type_boundaries":{"type":["array","null"],"items":{"type":"string","format":"date-time"}},"user_id":{"type":"string","format":"uuid"},"visibility":{"type":"string"}}},"ActivitySegmentEffort":{"type":"object","description":"Segment effort with segment details, for displaying on activity detail page.","required":["effort_id","segment_id","elapsed_time_seconds","is_personal_record","started_at","segment_name","segment_distance","activity_type_id","rank"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"effort_id":{"type":"string","format":"uuid"},"elapsed_time_seconds":{"type":"number","format":"double"},"end_fraction":{"type":["number","null"],"format":"double"},"is_personal_record":{"type":"boolean"},"rank":{"type":"integer","format":"int64"},"segment_distance":{"type":"number","format":"double"},"segment_id":{"type":"string","format":"uuid"},"segment_name":{"type":"string"},"start_fraction":{"type":["number","null"],"format":"double"},"started_at":{"type":"string","format":"date-time"}}},"ActivityTypeRow":{"type":"object","description":"Row from the activity_types table","required":["id","name","is_builtin","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"created_by":{"type":["string","null"],"format":"uuid"},"id":{"type":"string","format":"uuid"},"is_builtin":{"type":"boolean"},"name":{"type":"string"}}},"AddCommentRequest":{"type":"object","required":["content"],"properties":{"content":{"type":"string"},"parent_id":{"type":["string","null"],"format":"uuid"}}},"AgeGroup":{"type":"string","description":"Age group for demographic filtering (5-year brackets for younger, 10-year for older)","enum":["all","18-24","25-29","30-34","35-39","40-49","50-59","60+"]},"AuthResponse":{"type":"object","required":["token","user"],"properties":{"token":{"type":"string"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"ChangeMemberRoleRequest":{"type":"object","description":"Request to change a member's role","required":["role"],"properties":{"role":{"$ref":"#/components/schemas/TeamRole"}}},"ClimbCategoryFilter":{"type":"string","enum":["hc","cat1","cat2","cat3","cat4","flat"]},"Comment":{"type":"object","description":"A comment on an activity","required":["id","user_id","activity_id","content","created_at"],"properties":{"activity_id":{"type":"string","format":"uuid"},"content":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"deleted_at":{"type":["string","null"],"format":"date-time"},"id":{"type":"string","format":"uuid"},"parent_id":{"type":["string","null"],"format":"uuid"},"updated_at":{"type":["string","null"],"format":"date-time"},"user_id":{"type":"string","format":"uuid"}}},"CommentWithUser":{"type":"object","description":"Comment with user info for display","required":["id","user_id","activity_id","content","created_at","user_name"],"properties":{"activity_id":{"type":"string","format":"uuid"},"content":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"parent_id":{"type":["string","null"],"format":"uuid"},"updated_at":{"type":["string","null"],"format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"CountryStats":{"type":"object","description":"Country with user count for the countries dropdown","required":["country","user_count"],"properties":{"country":{"type":"string"},"user_count":{"type":"integer","format":"int64"}}},"CreateActivityTypeRequest":{"type":"object","description":"Request to create a custom activity type","required":["name"],"properties":{"name":{"type":"string"}}},"CreateSegmentRequest":{"type":"object","required":["name","points"],"properties":{"activity_type_id":{"type":["string","null"],"format":"uuid","description":"Optional if source_activity_id is provided (inherits from the activity).\nRequired if source_activity_id is not provided."},"description":{"type":["string","null"]},"name":{"type":"string"},"points":{"type":"array","items":{"$ref":"#/components/schemas/SegmentPoint"}},"source_activity_id":{"type":["string","null"],"format":"uuid","description":"Optional: the activity this segment was created from.\nIf provided, the segment inherits its activity_type_id and guarantees that activity gets the first effort."},"team_ids":{"type":["array","null"],"items":{"type":"string","format":"uuid"},"description":"Team IDs to share the segment with (for teams_only visibility)"},"visibility":{"type":"string"}}},"CreateTeamRequest":{"type":"object","description":"Request to create a team","required":["name"],"properties":{"avatar_url":{"type":["string","null"]},"description":{"type":["string","null"]},"join_policy":{"$ref":"#/components/schemas/TeamJoinPolicy"},"name":{"type":"string"},"visibility":{"$ref":"#/components/schemas/TeamVisibility"}}},"CrownCountEntry":{"type":"object","description":"Entry in global crown count leaderboard","required":["user_id","user_name","kom_count","qom_count","local_legend_count","total_crowns","rank"],"properties":{"kom_count":{"type":"integer","format":"int64"},"local_legend_count":{"type":"integer","format":"int64"},"qom_count":{"type":"integer","format":"int64"},"rank":{"type":"integer","format":"int64"},"total_crowns":{"type":"integer","format":"int64"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"DiscoverTeamsQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"DistanceLeaderEntry":{"type":"object","description":"Entry in global distance leaderboard","required":["user_id","user_name","total_distance_meters","activity_count","rank"],"properties":{"activity_count":{"type":"integer","format":"int64"},"rank":{"type":"integer","format":"int64"},"total_distance_meters":{"type":"number","format":"double"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"FeedActivity":{"type":"object","description":"Activity with user and stats for the feed","required":["id","user_id","name","activity_type_id","submitted_at","visibility","user_name","kudos_count","comment_count"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"comment_count":{"type":"integer","format":"int32"},"distance":{"type":["number","null"],"format":"double"},"duration":{"type":["number","null"],"format":"double"},"elevation_gain":{"type":["number","null"],"format":"double"},"id":{"type":"string","format":"uuid"},"kudos_count":{"type":"integer","format":"int32"},"name":{"type":"string"},"submitted_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"},"visibility":{"type":"string"}}},"FeedQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"Follow":{"type":"object","description":"A follow relationship between two users","required":["follower_id","following_id","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"follower_id":{"type":"string","format":"uuid"},"following_id":{"type":"string","format":"uuid"}}},"FollowListQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"FollowListResponse":{"type":"object","required":["users","total_count"],"properties":{"total_count":{"type":"integer","format":"int32"},"users":{"type":"array","items":{"$ref":"#/components/schemas/UserSummary"}}}},"FollowStatusResponse":{"type":"object","required":["is_following"],"properties":{"is_following":{"type":"boolean"}}},"Gender":{"type":"string","description":"User gender for demographic filtering","enum":["male","female","other","prefer_not_to_say"]},"GenderFilter":{"type":"string","description":"Gender filter for leaderboards (includes \"all\" option)","enum":["all","male","female"]},"GetAchievementsQuery":{"type":"object","description":"Get achievements for a specific user.","properties":{"include_lost":{"type":"boolean"}}},"GlobalLeaderboardQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"InviteToTeamRequest":{"type":"object","description":"Request to invite a user to a team","required":["email"],"properties":{"email":{"type":"string"},"role":{"$ref":"#/components/schemas/TeamRole"}}},"JoinTeamRequest":{"type":"object","description":"Request to join a team","properties":{"message":{"type":["string","null"]}}},"KudosGiver":{"type":"object","description":"User who gave kudos","required":["user_id","user_name","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"KudosResponse":{"type":"object","required":["given","kudos_count"],"properties":{"given":{"type":"boolean"},"kudos_count":{"type":"integer","format":"int32"}}},"KudosStatusResponse":{"type":"object","required":["has_given"],"properties":{"has_given":{"type":"boolean"}}},"LeaderboardEntry":{"type":"object","description":"A single entry in the leaderboard with user info and ranking","required":["effort_id","elapsed_time_seconds","started_at","is_personal_record","user_id","user_name","rank"],"properties":{"average_speed_mps":{"type":["number","null"],"format":"double"},"effort_id":{"type":"string","format":"uuid"},"elapsed_time_seconds":{"type":"number","format":"double"},"gap_seconds":{"type":["number","null"],"format":"double"},"is_personal_record":{"type":"boolean"},"moving_time_seconds":{"type":["number","null"],"format":"double"},"rank":{"type":"integer","format":"int64"},"started_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"LeaderboardFilters":{"type":"object","description":"Query parameters for filtered leaderboard requests","properties":{"age_group":{"$ref":"#/components/schemas/AgeGroup"},"country":{"type":["string","null"]},"gender":{"$ref":"#/components/schemas/GenderFilter"},"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"scope":{"$ref":"#/components/schemas/LeaderboardScope"},"weight_class":{"$ref":"#/components/schemas/WeightClass"}}},"LeaderboardFiltersResponse":{"type":"object","description":"Echoed filters in leaderboard response","required":["scope","gender","age_group","weight_class","limit","offset"],"properties":{"age_group":{"$ref":"#/components/schemas/AgeGroup"},"country":{"type":["string","null"]},"gender":{"$ref":"#/components/schemas/GenderFilter"},"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"scope":{"$ref":"#/components/schemas/LeaderboardScope"},"weight_class":{"$ref":"#/components/schemas/WeightClass"}}},"LeaderboardPosition":{"type":"object","description":"User's position in the leaderboard with surrounding entries","required":["user_rank","user_entry","entries_above","entries_below","total_count"],"properties":{"entries_above":{"type":"array","items":{"$ref":"#/components/schemas/LeaderboardEntry"}},"entries_below":{"type":"array","items":{"$ref":"#/components/schemas/LeaderboardEntry"}},"total_count":{"type":"integer","format":"int64"},"user_entry":{"$ref":"#/components/schemas/LeaderboardEntry"},"user_rank":{"type":"integer","format":"int64"}}},"LeaderboardResponse":{"type":"object","description":"Response for paginated leaderboard","required":["entries","total_count","filters"],"properties":{"entries":{"type":"array","items":{"$ref":"#/components/schemas/LeaderboardEntry"}},"filters":{"$ref":"#/components/schemas/LeaderboardFiltersResponse"},"total_count":{"type":"integer","format":"int64"}}},"LeaderboardScope":{"type":"string","description":"Time scope for leaderboard filtering","enum":["all_time","year","month","week"]},"ListSegmentsQuery":{"type":"object","properties":{"activity_type_id":{"type":["string","null"],"format":"uuid"},"climb_category":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ClimbCategoryFilter","description":"Filter by climb category"}]},"limit":{"type":"integer","format":"int64"},"max_distance_meters":{"type":["number","null"],"format":"double","description":"Maximum distance in meters"},"min_distance_meters":{"type":["number","null"],"format":"double","description":"Minimum distance in meters"},"search":{"type":["string","null"],"description":"Case-insensitive name search"},"sort_by":{"$ref":"#/components/schemas/SegmentSortBy","description":"Sort field"},"sort_order":{"$ref":"#/components/schemas/SortOrder","description":"Sort order"}}},"LoginRequest":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"}}},"NearbySegmentsQuery":{"type":"object","required":["lat","lon"],"properties":{"lat":{"type":"number","format":"double"},"limit":{"type":["integer","null"],"format":"int64"},"lon":{"type":"number","format":"double"},"radius_meters":{"type":["number","null"],"format":"double"}}},"Notification":{"type":"object","description":"A notification for a user","required":["id","user_id","notification_type","created_at"],"properties":{"actor_id":{"type":["string","null"],"format":"uuid"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"notification_type":{"type":"string"},"read_at":{"type":["string","null"],"format":"date-time"},"target_id":{"type":["string","null"],"format":"uuid"},"target_type":{"type":["string","null"]},"user_id":{"type":"string","format":"uuid"}}},"NotificationType":{"type":"string","description":"Type of notification","enum":["follow","kudos","comment","crown_achieved","crown_lost","personal_record"]},"NotificationWithActor":{"type":"object","description":"Notification with actor details for display","required":["id","user_id","notification_type","created_at"],"properties":{"actor_id":{"type":["string","null"],"format":"uuid"},"actor_name":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"notification_type":{"type":"string"},"read_at":{"type":["string","null"],"format":"date-time"},"target_id":{"type":["string","null"],"format":"uuid"},"target_type":{"type":["string","null"]},"user_id":{"type":"string","format":"uuid"}}},"NotificationsQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"NotificationsResponse":{"type":"object","description":"Response for notifications list with unread count","required":["notifications","unread_count","total_count"],"properties":{"notifications":{"type":"array","items":{"$ref":"#/components/schemas/NotificationWithActor"}},"total_count":{"type":"integer","format":"int64"},"unread_count":{"type":"integer","format":"int64"}}},"PreviewSegmentRequest":{"type":"object","required":["points"],"properties":{"points":{"type":"array","items":{"$ref":"#/components/schemas/SegmentPoint"}}}},"PreviewSegmentResponse":{"type":"object","required":["distance_meters","point_count","validation"],"properties":{"average_grade":{"type":["number","null"],"format":"double"},"climb_category":{"type":["integer","null"],"format":"int32"},"distance_meters":{"type":"number","format":"double"},"elevation_gain_meters":{"type":["number","null"],"format":"double"},"elevation_loss_meters":{"type":["number","null"],"format":"double"},"max_grade":{"type":["number","null"],"format":"double"},"point_count":{"type":"integer","minimum":0},"validation":{"$ref":"#/components/schemas/SegmentValidation"}}},"RegisterRequest":{"type":"object","required":["email","password","name"],"properties":{"email":{"type":"string"},"name":{"type":"string"},"password":{"type":"string"}}},"ReprocessResult":{"type":"object","required":["segment_id","activities_checked","efforts_created"],"properties":{"activities_checked":{"type":"integer","minimum":0},"efforts_created":{"type":"integer","minimum":0},"segment_id":{"type":"string","format":"uuid"}}},"ResolveTypeQuery":{"type":"object","description":"Resolve an activity type by name or alias.","required":["name"],"properties":{"name":{"type":"string"}}},"ResolveTypeResponse":{"type":"object","required":["result"],"properties":{"result":{"type":"string"},"type_id":{"type":["string","null"],"format":"uuid"},"type_ids":{"type":["array","null"],"items":{"type":"string","format":"uuid"}}}},"ReviewJoinRequestRequest":{"type":"object","required":["approved"],"properties":{"approved":{"type":"boolean"}}},"Segment":{"type":"object","required":["id","creator_id","name","activity_type_id","distance_meters","visibility","created_at"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"average_grade":{"type":["number","null"],"format":"double"},"climb_category":{"type":["integer","null"],"format":"int32"},"created_at":{"type":"string","format":"date-time"},"creator_id":{"type":"string","format":"uuid"},"description":{"type":["string","null"]},"distance_meters":{"type":"number","format":"double"},"elevation_gain_meters":{"type":["number","null"],"format":"double"},"elevation_loss_meters":{"type":["number","null"],"format":"double"},"id":{"type":"string","format":"uuid"},"max_grade":{"type":["number","null"],"format":"double"},"name":{"type":"string"},"visibility":{"type":"string"}}},"SegmentAchievements":{"type":"object","description":"Current achievement holders for a segment","required":["segment_id"],"properties":{"kom":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/AchievementHolder"}]},"local_legend":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/AchievementHolder"}]},"qom":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/AchievementHolder"}]},"segment_id":{"type":"string","format":"uuid"}}},"SegmentEffort":{"type":"object","required":["id","segment_id","activity_id","user_id","started_at","elapsed_time_seconds","is_personal_record","created_at"],"properties":{"activity_id":{"type":"string","format":"uuid"},"average_speed_mps":{"type":["number","null"],"format":"double"},"created_at":{"type":"string","format":"date-time"},"elapsed_time_seconds":{"type":"number","format":"double"},"end_fraction":{"type":["number","null"],"format":"double"},"id":{"type":"string","format":"uuid"},"is_personal_record":{"type":"boolean"},"max_speed_mps":{"type":["number","null"],"format":"double"},"moving_time_seconds":{"type":["number","null"],"format":"double"},"segment_id":{"type":"string","format":"uuid"},"start_fraction":{"type":["number","null"],"format":"double"},"started_at":{"type":"string","format":"date-time"},"user_id":{"type":"string","format":"uuid"}}},"SegmentPoint":{"type":"object","required":["lat","lon"],"properties":{"ele":{"type":["number","null"],"format":"double"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"}}},"SegmentSortBy":{"type":"string","enum":["created_at","name","distance","elevation_gain"]},"SegmentTrackData":{"type":"object","required":["points","bounds"],"properties":{"bounds":{"$ref":"#/components/schemas/TrackBounds"},"points":{"type":"array","items":{"$ref":"#/components/schemas/SegmentTrackPoint"}}}},"SegmentTrackPoint":{"type":"object","required":["lat","lon"],"properties":{"ele":{"type":["number","null"],"format":"double"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"}}},"SegmentValidation":{"type":"object","required":["is_valid","errors"],"properties":{"errors":{"type":"array","items":{"type":"string"}},"is_valid":{"type":"boolean"}}},"SegmentWithStats":{"allOf":[{"$ref":"#/components/schemas/Segment"},{"type":"object","required":["effort_count","athlete_count","creator_name"],"properties":{"athlete_count":{"type":"integer","format":"int64"},"creator_name":{"type":"string"},"effort_count":{"type":"integer","format":"int64"}}}]},"ShareWithTeamsRequest":{"type":"object","description":"Request to share activity/segment with teams","required":["team_ids"],"properties":{"team_ids":{"type":"array","items":{"type":"string","format":"uuid"}}}},"SortOrder":{"type":"string","enum":["asc","desc"]},"StarResponse":{"type":"object","required":["starred"],"properties":{"starred":{"type":"boolean"}}},"StarredSegmentEffort":{"type":"object","description":"Starred segment with the user's effort stats, for the starred segments dashboard.","required":["segment_id","segment_name","activity_type_id","distance_meters","user_effort_count"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"best_effort_date":{"type":["string","null"],"format":"date-time"},"best_effort_rank":{"type":["integer","null"],"format":"int64"},"best_time_seconds":{"type":["number","null"],"format":"double"},"distance_meters":{"type":"number","format":"double"},"elevation_gain_meters":{"type":["number","null"],"format":"double"},"leader_time_seconds":{"type":["number","null"],"format":"double"},"segment_id":{"type":"string","format":"uuid"},"segment_name":{"type":"string"},"user_effort_count":{"type":"integer","format":"int64"}}},"Stats":{"type":"object","description":"Platform statistics for the homepage","required":["active_users","segments_created","activities_uploaded"],"properties":{"active_users":{"type":"integer","format":"int64"},"activities_uploaded":{"type":"integer","format":"int64"},"segments_created":{"type":"integer","format":"int64"}}},"Team":{"type":"object","description":"A team for sharing activities and segments","required":["id","name","visibility","join_policy","owner_id","member_count","activity_count","segment_count","created_at"],"properties":{"activity_count":{"type":"integer","format":"int32"},"avatar_url":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"description":{"type":["string","null"]},"id":{"type":"string","format":"uuid"},"join_policy":{"$ref":"#/components/schemas/TeamJoinPolicy"},"member_count":{"type":"integer","format":"int32"},"name":{"type":"string"},"owner_id":{"type":"string","format":"uuid"},"segment_count":{"type":"integer","format":"int32"},"updated_at":{"type":["string","null"],"format":"date-time"},"visibility":{"$ref":"#/components/schemas/TeamVisibility"}}},"TeamContentQuery":{"type":"object","properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"}}},"TeamInvitation":{"type":"object","description":"An invitation to join a team","required":["id","team_id","email","invited_by","role","token","expires_at","created_at"],"properties":{"accepted_at":{"type":["string","null"],"format":"date-time"},"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"expires_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"invited_by":{"type":"string","format":"uuid"},"role":{"$ref":"#/components/schemas/TeamRole"},"team_id":{"type":"string","format":"uuid"},"token":{"type":"string"}}},"TeamInvitationWithDetails":{"type":"object","description":"Invitation with additional context","required":["id","team_id","team_name","email","invited_by","invited_by_name","role","expires_at","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"expires_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"invited_by":{"type":"string","format":"uuid"},"invited_by_name":{"type":"string"},"role":{"$ref":"#/components/schemas/TeamRole"},"team_id":{"type":"string","format":"uuid"},"team_name":{"type":"string"}}},"TeamJoinPolicy":{"type":"string","description":"Team join policy","enum":["open","request","invitation"]},"TeamJoinRequest":{"type":"object","description":"Request to join a team","required":["id","team_id","user_id","status","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"reviewed_at":{"type":["string","null"],"format":"date-time"},"reviewed_by":{"type":["string","null"],"format":"uuid"},"status":{"type":"string"},"team_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"TeamJoinRequestWithUser":{"type":"object","description":"Join request with user details for admin review","required":["id","team_id","user_id","user_name","status","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message":{"type":["string","null"]},"status":{"type":"string"},"team_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"TeamMember":{"type":"object","description":"Team member with user details","required":["user_id","user_name","role","joined_at"],"properties":{"invited_by":{"type":["string","null"],"format":"uuid"},"invited_by_name":{"type":["string","null"]},"joined_at":{"type":"string","format":"date-time"},"role":{"$ref":"#/components/schemas/TeamRole"},"user_id":{"type":"string","format":"uuid"},"user_name":{"type":"string"}}},"TeamMembership":{"type":"object","description":"A membership in a team","required":["team_id","user_id","role","joined_at"],"properties":{"invited_by":{"type":["string","null"],"format":"uuid"},"joined_at":{"type":"string","format":"date-time"},"role":{"$ref":"#/components/schemas/TeamRole"},"team_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"TeamRole":{"type":"string","description":"Team role enum","enum":["owner","admin","member"]},"TeamSummary":{"type":"object","description":"Team summary for listings","required":["id","name","member_count","activity_count","segment_count"],"properties":{"activity_count":{"type":"integer","format":"int32"},"avatar_url":{"type":["string","null"]},"description":{"type":["string","null"]},"id":{"type":"string","format":"uuid"},"member_count":{"type":"integer","format":"int32"},"name":{"type":"string"},"segment_count":{"type":"integer","format":"int32"}}},"TeamVisibility":{"type":"string","description":"Team visibility (whether team is discoverable)","enum":["public","private"]},"TeamWithMembership":{"allOf":[{"$ref":"#/components/schemas/Team"},{"type":"object","required":["is_member","owner_name"],"properties":{"is_member":{"type":"boolean"},"owner_name":{"type":"string"},"user_role":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TeamRole"}]}}}],"description":"Team with additional context for the current user"},"TrackBounds":{"type":"object","required":["min_lat","max_lat","min_lon","max_lon"],"properties":{"max_lat":{"type":"number","format":"double"},"max_lon":{"type":"number","format":"double"},"min_lat":{"type":"number","format":"double"},"min_lon":{"type":"number","format":"double"}}},"TrackData":{"type":"object","required":["points","bounds"],"properties":{"bounds":{"$ref":"#/components/schemas/TrackBounds"},"points":{"type":"array","items":{"$ref":"#/components/schemas/TrackPoint"}}}},"TrackPoint":{"type":"object","required":["lat","lon"],"properties":{"ele":{"type":["number","null"],"format":"double"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"},"time":{"type":["string","null"]}}},"UpdateActivityRequest":{"type":"object","properties":{"activity_type_id":{"type":["string","null"],"format":"uuid"},"name":{"type":["string","null"]},"visibility":{"type":["string","null"]}}},"UpdateDemographicsRequest":{"type":"object","description":"Request to update user demographics","properties":{"birth_year":{"type":["integer","null"],"format":"int32"},"country":{"type":["string","null"]},"gender":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Gender"}]},"region":{"type":["string","null"]},"weight_kg":{"type":["number","null"],"format":"double"}}},"UpdateTeamRequest":{"type":"object","description":"Request to update a team","properties":{"avatar_url":{"type":["string","null"]},"description":{"type":["string","null"]},"join_policy":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TeamJoinPolicy"}]},"name":{"type":["string","null"]},"visibility":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TeamVisibility"}]}}},"UploadQuery":{"type":"object","required":["activity_type_id","name"],"properties":{"activity_type_id":{"type":"string","format":"uuid"},"name":{"type":"string"},"segment_types":{"type":["array","null"],"items":{"type":"string","format":"uuid"},"description":"Multi-sport: JSON array of activity type UUIDs for each segment"},"team_ids":{"type":["string","null"],"description":"Comma-separated list of team IDs to share with (for teams_only visibility)"},"type_boundaries":{"type":["array","null"],"items":{"type":"string","format":"date-time"},"description":"Multi-sport: JSON array of ISO-8601 timestamps marking segment boundaries"},"visibility":{"type":["string","null"]}}},"User":{"type":"object","required":["id","email","name","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"UserProfile":{"type":"object","description":"User profile with follow counts for display","required":["id","email","name","created_at","follower_count","following_count"],"properties":{"birth_year":{"type":["integer","null"],"format":"int32"},"country":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"follower_count":{"type":"integer","format":"int32"},"following_count":{"type":"integer","format":"int32"},"gender":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Gender"}]},"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"region":{"type":["string","null"]},"weight_kg":{"type":["number","null"],"format":"double"}}},"UserResponse":{"type":"object","required":["id","email","name"],"properties":{"email":{"type":"string"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"UserSummary":{"type":"object","description":"Summary of a user for follower/following lists","required":["id","name","follower_count","following_count","followed_at"],"properties":{"followed_at":{"type":"string","format":"date-time"},"follower_count":{"type":"integer","format":"int32"},"following_count":{"type":"integer","format":"int32"},"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"UserWithDemographics":{"type":"object","description":"User profile with demographics","required":["id","email","name","created_at"],"properties":{"birth_year":{"type":["integer","null"],"format":"int32"},"country":{"type":["string","null"]},"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"gender":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Gender"}]},"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"region":{"type":["string","null"]},"weight_kg":{"type":["number","null"],"format":"double"}}},"Visibility":{"type":"string","enum":["public","private"]},"WeightClass":{"type":"string","description":"Weight class for leaderboard filtering","enum":["all","featherweight","lightweight","welterweight","middleweight","cruiserweight","heavyweight"]}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer"}}},"security":[{"bearer_auth":[]}],"tags":[{"name":"auth","description":"Authentication endpoints"},{"name":"users","description":"User management endpoints"},{"name":"activities","description":"Activity management endpoints"},{"name":"segments","description":"Segment management endpoints"},{"name":"leaderboards","description":"Leaderboard endpoints"},{"name":"social","description":"Social features (follows, kudos, comments)"},{"name":"notifications","description":"Notification endpoints"},{"name":"teams","description":"Team management endpoints"},{"name":"stats","description":"Platform statistics"}]}